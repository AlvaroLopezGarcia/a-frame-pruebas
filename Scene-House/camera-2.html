<!DOCTYPE html>

<!-- Simple physics
  Using aframe-physics-system.

  The camera does not go though objects in the scene, and is "sustained"
  by the plane acting as a floor. But if you go beyond the borders of the
  plane, you fall down (you know, gravity...)
-->

<html>
  <head>
    <meta charset="utf-8">
    <script src="//aframe.io/releases/0.8.2/aframe.min.js"></script>
    <script src="//cdn.rawgit.com/donmccurdy/aframe-physics-system/v3.3.0/dist/aframe-physics-system.min.js"></script>
    <script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v5.0.0/dist/aframe-extras.min.js"></script>
    <script src="kinema.js"></script>
    <script src="components.js"></script>
  <body>
    <a-scene physics="debug: true">
      <a-assets>
        <img id="tejado" src="tejado.jpeg">
        <img id="pared" src="pared.jpeg">
        <img id="camino" src="floor.jpeg">
        <img id="cesped" src="cesped.jpeg">
        <img id="caja" src="caja.jpeg">
      </a-assets>
      <!--USER POSITION-->

      <!-- Camera rig, with a camera and a cylynder -->
      <a-entity kinema-body="radius: 0.8;" movement-controls="fly: false" position="0 4 14" look-controls>
        <a-entity camera position="0 1.6 0" >
          <a-cursor></a-cursor>
        </a-entity>
        <!-- Cylinder to give an idea of the "size" of the camera rig -->
        <a-cylinder position="0 0.5 0" height="1" radius="0.8" color="green"></a-cylinder>
      </a-entity>

      <!-- PATH -->

      <!-- Static floor 1-->
      <a-plane static-body position="-0.5 4 13" rotation="-90 0 0" width="3" height="6"
               side ="double" color="brown" src="#camino"></a-plane>
      <!-- Static floor 2-->
      <a-plane static-body position="3 4 11" rotation="-90 0 90" width="2" height="4"
               side ="double" color="brown" src="#camino"></a-plane>
      <!-- Static floor 3-->
      <a-plane static-body position="4 4 8" rotation="-90 0 0" width="2" height="4"
               side ="double" color="brown" src="#camino"></a-plane>
      <!-- Static floor 4-->
      <a-plane static-body position="1 4 7" rotation="-90 0 90" width="2" height="4"
               side ="double" color="brown" src="#camino"></a-plane>
      <!-- Static floor 5-->
      <a-plane path-rotation static-body position="0 4 3" rotation="0 0 0" width="2" height="6"
               side ="double" color="brown" src="#camino"></a-plane>
      <!-- Text: GO AHEAD
      <a-text value="JUMP" color="white"
        position="-0.75 4 0.5" rotation="-90 0 0" scale="2.5 2.5 2.5"></a-text>-->
      <!-- PUSH THE BOX -->
      <a-box dynamic-body position="0 5.04 12" width="1.5" height="2" depth="1"
              src="#caja">
              <a-text value="PUSH" color="white" position="-0.45 0 0.5" rotation="0 0 0" 
              scale="1.5 2 2"></a-text>
      </a-box>

      <!-- GAME OVER-->

      <!-- Static floor GAME OVER-->
      <a-plane static-body position="0 -4 0" rotation="-90 0 0" width="35" height="42"
               side ="double" color="black"></a-plane>
      <!-- Text: GAME OVER-->
      <a-text value="GAME OVER" color="white"
        position="-16 -4 19" rotation="-90 0 45" scale="2.5 2.5 2.5" width="70"></a-text>


      <!-- HOUSE-->
      
      <!-- Static floor HOUSE-->
      <a-plane static-body position="0 1 -9" rotation="-90 0 0" width="20" height="20"
               side ="double" src="#cesped"></a-plane>
      <!-- Static back-wall-->
      <a-plane static-body position="0 2.5 -16" rotation="0 0 0" width="10" height="3"
               side ="double" src="#pared"></a-plane>
      <!-- Text: THE END-->
      <a-text value="THE END" color="white"
        position="-2 2.5 -16" rotation="0 0 0" scale="2.5 2.5 2.5" width="10"></a-text>
      <!-- Static left-wall-->
      <a-plane static-body position="-5 2.5 -11" rotation="0 90 0" width="10" height="3"
               side ="double" src="#pared"></a-plane>
      <!-- Static right-wall-->
      <a-plane static-body position="5 2.5 -11" rotation="0 90 0" width="10" height="3"
               side ="double" src="#pared"></a-plane>
      <!-- Static left-inside-wall -->
      <a-plane static-body position="-2.5 2.5 -11" rotation="0 0 0" width="5" height="3"
               side ="double" color="#006666" src="#pared"></a-plane>
      <!-- Static right-inside-wall -->
      <a-plane static-body position="3.5 2.5 -11" rotation="0 0 0" width="3" height="3"
               side ="double" color="#006666" src="#pared"></a-plane>
      <!-- Static up-inside-wall -->
      <a-plane static-body position="1 3.5 -11" rotation="0 0 0" width="2" height="1"
               side ="double" color="#006666" src="#pared"></a-plane>
      <!-- Push box -->
      <a-box dynamic-body position="1 2 -11" width="1.7" height="1.7" depth="1.7"
              src="#caja">
              <a-text value="PUSH" color="white" position="-0.75 0 0.85" rotation="0 0 0" 
              scale="2.5 2.5 2.5"></a-text>
      </a-box>
      <!-- Static left-front-wall -->
      <a-plane static-body position="-4 2.5 -6" rotation="0 0 0" width="2" height="3"
               side ="double" src="#pared"></a-plane>
      <!-- Static right-front-wall -->
      <a-plane static-body position="2 2.5 -6" rotation="0 0 0" width="6" height="3"
               side ="double" src="#pared"></a-plane>
      <!-- Static up-front-wall -->
      <a-plane static-body position="-2 3.5 -6" rotation="0 0 0" width="2" height="1"
               side ="double" src="#pared"></a-plane>
      <!-- Static door -->
      <a-plane door_component static-body id="door" position="-2 2 -6" rotation="0 0 0" width="2" height="2"
               side ="double" color="red"></a-plane>
      <!-- Static door-button -->
      <a-box clickable static-body position="0.5 2.5 -6" width="1" height="1" depth="1.7"
                src="#caja">
                <a-text value="PRESS" color="white" position="-0.35 0 0.85" rotation="0 0 0" 
              scale="1 1 1"></a-text>
      </a-box>      
      <!-- Static roof -->
      <a-box static-body position="0 8 -11" width="12" height="8" depth="12"
                src="#tejado"></a-box>
      <a-sky color="grey"></a-sky>
    </a-scene>
  </body>
</html>